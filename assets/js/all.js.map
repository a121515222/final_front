{"version":3,"sources":["all.js"],"names":["showProductlist","document","querySelector","productlistCategory","cartTable","totalPrice","delAllCarts","errormessage","userinfo","querySelectorAll","sendform","errorSapn","userform","apiPath","init","getPorductList","getCartsList","axios","get","then","response","renderProductList","data","products","renderPrductCategory","error","console","log","content","forEach","item","images","id","title","origin_price","price","innerHTML","category","indexOf","push","selPorduct","filter","value","renderCart","contentTail","carts","product","quantity","textContent","finalTotal","addCart","e","preventDefault","sentdata","productId","target","dataset","post","delCart","del","cartid","delAllCart","adjustCartNumber","parseInt","patch","getUserInfo","sentUserData","user","name","tel","email","address","payment","objkey","Object","keys","i","getAttribute","displayError","status","alert","reset","constraints","presence","message","format","pattern","flags","errorMessage","validate","index","errorObjkey","addEventListener"],"mappings":"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","file":"all.js","sourcesContent":["\n//DOM\nconst showProductlist = document.querySelector('.js-showProwlist');\nconst productlistCategory = document.querySelector('.js-productCategory');\nconst cartTable = document.querySelector('.js-carts');\nconst totalPrice = document.querySelector('.js-price');\nconst delAllCarts = document.querySelector('.js-delAll');\nconst errormessage = document.querySelector('.js-userinfo');\nconst userinfo = document.querySelectorAll('.js-userinfo .userdata');\nconst sendform = document.querySelector('.js-sendform');\nconst errorSapn = document.querySelectorAll('.js-userinfo span');\nconst userform = document.querySelector('.js-userform');\n//全域變數\n\nconst apiPath = 'chun-chia'\n\n//功能\nfunction init() {\n  getPorductList()\n  getCartsList()\n}\n\n//取得產品列表\n\nfunction getPorductList() {\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${apiPath}/products`).then((response) => {\n    //console.log(response.data.products)\n    renderProductList(response.data.products)\n    renderPrductCategory(response.data.products)\n  }).catch((error) => { console.log(error) });\n}\n\nfunction renderProductList(data) {\n  let content = '';\n  data.forEach((item) => {\n    content += `<li class=\"card rounded-0 border-white flex-columl position-relative w-22 \">\n  <div><img src=${item.images} alt=\"product\"></div>\n  <a href=\"#\" data-id=\"${item.id}\"  class=\"btn rounded-0 bg-dark text-white text-center py-3 hoverwhite border-dark\">加入購物車</a>\n  <span class=\"d-block fs-3\">${item.title}</span>\n  <span class=\"d-block fs-5\"><s>NT${item.origin_price}</s></span>\n  <span class=\"d-block fs-3\">NT${item.price}</span>\n  <div class=\"position-absolute top-0 end-0\"><span class=\"d-block bg-dark text-white px-3 py2\">新品</span></div>\n</li>`\n  });\n  showProductlist.innerHTML = content;\n}\n\nfunction renderPrductCategory(data) {\n  let category = [];\n  let content = '<option value=\"all\">所有分類</option>';\n  data.forEach((item) => {\n    if (category.indexOf(item.category) === -1) {\n      category.push(item.category)\n    }\n  });\n  category.forEach((item) => {\n    content += `<option value=\"${item}\">${item}</option>`\n  });\n  productlistCategory.innerHTML = content;\n}\n//選擇產品\nfunction selPorduct() {\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${apiPath}/products`).then((response) => {\n\n    let data = null;\n    data = response.data.products.filter((item) => {\n      if(productlistCategory.value===\"all\"){\n        return item\n      }\n     else if (item.category === productlistCategory.value) {\n        return item\n      }\n      \n    })\n    renderProductList(data)\n\n  }).catch((error) => { console.log(error) });\n\n}\n//取得購物車\nfunction getCartsList() {\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${apiPath}/carts`).then((response) => {\n\n    //console.log(response.data.carts)\n    renderCart(response.data)\n\n  }).catch((error) => { console.log(error) });\n}\n//渲染購物車\nfunction renderCart(data) {\n  let content = `<thead><tr><th scope=\"col\">品項</th><th scope=\"col\">單價</th><th scope=\"col\">數量</th><th scope=\"col\">金額</th><th scope=\"col\"></th></tr></thead><tbody>`;\n  let contentTail = `</tbody>`;\n\n  data.carts.forEach((item) => {\n    content += `<tr class =\"align-middle\">\n  <th scope=\"row\" class=\"d-flex align-items-center gap-2\"><div class=\"w-80px h-80px \"><img src=\"${item.product.images}\" alt=\"\"></div><span\n      class=\"fs- w-160px text-start\">${item.product.title}</span></th>\n  <td class=\"text-start\"><span class=\"fs-6 \">${item.product.price}</span></td>\n  <td class=\"text-start\"><div class=\"d-flex gap-3\"><a href=\"#\"  ><i class=\"fas fa-minus fa-sm\"data-cartid=\"${item.id}\" data-quantity=${item.quantity - 1}></i></a><span class=\"fs-6\" data-productid=\"${item.product.id}\" data-cartID=\"${item.id}\">${item.quantity}</span><a href=\"#\"   ><i class=\"fas fa-plus fa-sm\" data-cartid=\"${item.id}\" data-quantity=${item.quantity + 1}></i></a></div></td>\n  <td class=\"text-start\"><span class=\"fs-6\">${item.product.price * item.quantity}</span></td>\n  <td class=\"text-start\"><a href=\"#\" data-productID=\"${item.product.id}\" ><i class=\"fas fa-times\" data-del=true data-cartid=\"${item.id}\"></i></a></td>\n</tr>`\n\n  });\n  cartTable.innerHTML = content + contentTail;\n\n  totalPrice.textContent = data.finalTotal;\n  //console.log(content + contentTail)\n}\n\n//加入購物車\n\nfunction addCart(e) {\n  e.preventDefault();\n  let sentdata = {\n    \"data\": {\n      \"productId\": \"\",\n      \"quantity\": 1\n    }\n  }\n  sentdata.data.productId = e.target.dataset.id\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${apiPath}/carts`, sentdata).then((response) => {\n    renderCart(response.data)\n  }).catch((error) => { console.log(error) })\n\n}\n//刪除購物車\nfunction delCart(e) {\n  e.preventDefault()\n  if (e.target.dataset.del === 'true') {\n    axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${apiPath}/carts/${e.target.dataset.cartid}`).then((response) => {\n      renderCart(response.data)\n    }).catch((error) => { console.log(error) })\n  }\n}\n//刪除所有購物車\nfunction delAllCart(e){\n  e.preventDefault()\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${apiPath}/carts`).then((response) => {\n      renderCart(response.data)\n    }).catch((error) => { console.log(error) })\n}\n//購物車數量增減\nfunction adjustCartNumber(e) {\n  e.preventDefault();\n  let sentdata = {\n    \"data\": {\n      \"id\": \"\",\n      \"quantity\": 0\n    }\n  }\n\n  sentdata.data.id = e.target.dataset.cartid\n  sentdata.data.quantity = parseInt(e.target.dataset.quantity)\n  if (e.target.dataset.del === 'true') {\n    return\n  }\n  else {\n    if (sentdata.data.quantity === 0) {\n      axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${apiPath}/carts/${e.target.dataset.cartid}`).then((response) => {\n        renderCart(response.data)\n      }).catch((error) => { console.log(error) })\n    }\n    else {\n      axios.patch(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${apiPath}/carts`, sentdata).then((response) => {\n        renderCart(response.data)\n      }).catch((error) => { console.log(error) })\n    }\n  }\n}\n\n//取得使用者資訊並送出\n\nfunction getUserInfo(e) {\n  e.preventDefault();\n  const sentUserData = {\n    data: {\n      user: {\n        name: \"\",\n        tel: \"\",\n        email: \"\",\n        address: \"\",\n        payment: \"\"\n      }\n    }\n  };\n  userinfo.forEach((item) => {\n    let objkey = Object.keys(sentUserData.data.user);\n    objkey.forEach((i) => {\n      if (item.getAttribute('id') === i) {\n        sentUserData.data.user[i] = item.value;\n      }\n    })\n  })\n  console.log(sentUserData)\n  //console.log(sentUserData)\n  displayError()\n  if(!displayError()){\n    axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${apiPath}/orders\n    `,sentUserData).then((response)=>{\n      if(response.data.status===true){\n        alert('訂單已成功送出，感謝您的訂購')\n        console.log(response.data)\n        userform.reset()\n        getCartsList()\n      }\n    }).catch((error)=>{\n      console.log(error)\n      if(error){\n        alert('購物車沒有東西或系統出錯，請稍後在試。')\n      }\n    })\n  }\n}\n\n//validate.js套件\nfunction displayError(){\n  const constraints = {\n    name: {\n      presence: {\n        message: \"必填欄位\"\n      },\n    },\n    tel: {\n      presence: {\n        message: \"必填欄位\"\n      }, format: {\n        pattern: /\\d{9,10}/,\n        flags: \"i\",\n        message: \"請輸入純數字與完整的電話號碼\"\n      }\n    },\n    email: {\n      presence: {\n        message: \"必填欄位\"\n      },\n    },\n    address: {\n      presence: {\n        message: \"必填欄位\"\n      },\n    },\n    payment: {\n      presence: {\n        message: \"必選擇一種付款方式\"\n      },\n    },\n  }\n\n  let errorMessage = validate(errormessage, constraints);\n  //console.log(errorMessage)\n  //顯示錯誤訊息\n  \n  errorSapn.forEach((item,index)=>{\n    \n    if(errorMessage){\n      const errorObjkey =  Object.keys(errorMessage);\n      if(errorObjkey.indexOf(item.getAttribute('error'))!==-1){\n        errorSapn[index].textContent = errorMessage[item.getAttribute('error')][0]\n      }\n      else{\n        errorSapn[index].textContent = \"\";\n      }\n    }\n  })\n  return errorMessage\n}\n\ninit()\n\n//監聽\nproductlistCategory.addEventListener('change', selPorduct, false);\nshowProductlist.addEventListener('click', addCart, false);\ncartTable.addEventListener('click', adjustCartNumber, false);\ncartTable.addEventListener('click', delCart, false);\nsendform.addEventListener('click', getUserInfo, false);\ndelAllCarts.addEventListener('click',delAllCart,false);"]}